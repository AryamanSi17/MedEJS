<% if (isUserLoggedIn) { %>
    <!-- Include auth_header -->
    <%- include('auth_header') %>
        <% } else { %>
            <!-- Include regular header -->
            <%- include('header') %>
                <% } %>
                    <style>
                        /* The Modal (background) */
                        .modal {
                            display: none;
                            position: fixed;
                            z-index: 1000;
                            left: 0;
                            top: 0;
                            width: 100%;
                            height: 100%;
                            overflow: auto;
                            background-color: rgba(0, 0, 0, 0.7);
                        }

                        /* Modal Content */
                        .modal-content {
                            background-color: #ffffff;
                            margin: auto;
                            padding: 30px;
                            /* Increased padding */
                            border: none;
                            width: 30%;
                            /* Smaller width */
                            box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.2);
                            border-radius: 8px;
                            position: absolute;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            font-size: 18px;
                            /* Bigger text */
                        }

                        /* The Close Button */
                        .close {
                            color: #333;
                            float: right;
                            font-size: 24px;
                            font-weight: bold;
                            background: none;
                            border: none;
                            padding: 0;
                            cursor: pointer;
                            line-height: 1;
                        }

                        .close:hover,
                        .close:focus {
                            color: #ff5252;
                        }

                        .modal-content i.fas {
                            display: block;
                            margin: 0 auto 20px auto;
                            /* Adds margin to the bottom */
                            text-align: center;
                            /* Centers the icon */
                        }
                    </style>
                    <!-- The Modal -->
                    <div id="courseModal" class="modal">
                        <div class="modal-content">
                            <span class="close">&times;</span>
                            <i class="fas fa-hourglass-half fa-3x"></i>
                            <p>Course launching soon</p>


                        </div>
                    </div>

                    <div class="rbt-page-banner-wrapper">
                        <!-- Start Banner BG Image  -->
                        <div class="rbt-banner-image"></div>
                        <!-- End Banner BG Image  -->
                        <div class="rbt-banner-content">
                            <!-- Start Banner Content Top  -->
                            <div class="rbt-banner-content-top">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <!-- Start Breadcrumb Area  -->
                                            <ul class="page-list">
                                                <li class="rbt-breadcrumb-item"><a href="/">Home</a></li>
                                                <li>
                                                    <div class="icon-right"><i class="feather-chevron-right"></i></div>
                                                </li>
                                                <li class="rbt-breadcrumb-item active">All Courses</li>
                                            </ul>
                                            <!-- End Breadcrumb Area  -->

                                            <div class=" title-wrapper">
                                                <h1 class="title mb--0">All Courses</h1>
                                            </div>

                                            <p class="description">Courses that help achieve your goals!</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- End Banner Content Top  -->
                            <!-- Start Course Top  -->
                            <div class="rbt-course-top-wrapper mt--40">
                                <div class="container">
                                    <!-- <div class="row g-5 align-items-center">
                                        <div class="col-lg-7 col-md-12">
                                            <div class="rbt-sorting-list d-flex flex-wrap align-items-center justify-content-start justify-content-lg-end">
                                                <div class="rbt-short-item">
                                                    <form action="/search-courses" class="rbt-search-style me-0">
                                                        <input type="text" placeholder="Search Your Course..">
                                                        <button type="submit" class="rbt-search-btn rbt-round-btn">
                                                            <i class="feather-search"></i>Search
                                                        </button>
                                                    </form>
                                                </div>
                
                                                <div class="rbt-short-item">
                                                    <div class="view-more-btn text-start text-sm-end">
                                                        <button class="discover-filter-button discover-filter-activation rbt-btn btn-white btn-md radius-round">Filter<i class="feather-filter"></i></button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div> -->
                                    <div class="row mt--60">
                                        <div class="col-lg-12">
                                            <div
                                                class="rbt-portfolio-filter filter-button-default messonry-button text-start justify-content-start">
                                                <button data-filter="*" class=""><span class="filter-text">All
                                                        Courses</span><span class="course-number"></span></button>
                                                <button data-filter=".cat--1" id="professional-filter"><span
                                                        class="filter-text">Professional Certifications</span><span
                                                        class="course-number"></span></button>
                                                <button data-filter=".cat--2" id="advanced-filter"><span
                                                        class="filter-text">Advance Certifications</span><span
                                                        class="course-number"></span></button>
                                                <button data-filter=".cat--3" id="fellowship-filter"><span
                                                        class="filter-text">Fellowships</span><span
                                                        class="course-number"></span></button>
                                                <button data-filter=".cat--4" id="trending-filter"><span
                                                        class="filter-text">Trending</span><span
                                                        class="course-number"></span></button>
                                                <button data-filter=".cat--4"><span class="filter-text">MBBS</span><span
                                                        class="course-number"></span></button>
                                                <!-- <button data-filter="*"><span class="filter-text">AYUSH</span><span
                                                        class="course-number"></span></button> -->
                                                <button data-filter=".cat--1, .cat--2"><span
                                                        class="filter-text">BAMS</span><span
                                                        class="course-number"></span></button>
                                                <button data-filter=".cat--1 ,.cat--2"><span
                                                        class="filter-text">BDS</span><span
                                                        class="course-number"></span></button>
                                                <button data-filter=".cat--1, .cat--2"><span
                                                        class="filter-text">BUMS</span><span
                                                        class="course-number"></span></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- End Course Top  -->
                        </div>
                    </div>
                    <a href="https://api.whatsapp.com/send/?phone=919730020462&text&type=phone_number&app_absent=0"
                        target="" class="whatsapp_float"><img src="assets/images/whatsapp-icon.png" alt=""></a>
                    <div class="rbt-section-overlayping-top rbt-section-gapBottom masonary-wrapper-activation">
                        <div class="container">
                            <!-- Start Card Area -->
                            <div class="row row--15">
                                <div class="col-lg-12">
                                    <div class="mesonry-list grid-metro2">
                                        <div class="resizer"></div>
                                        <!-- Start Single Card  -->
                                        <% courses.forEach(function(course) { %>
                                            <div class="maso-item <%= course.category %>">
                                                <div class="rbt-card variation-01 rbt-hover card-list-2">
                                                    <div class="rbt-card-img">
                                                        <a href="<%= course.courseDetailLink %>">
                                                            <img src="<%= course.imagePath %>" alt="<%= course.name %>">
                                                        </a>
                                                    </div>
                                                    <div class="rbt-card-body">
                                                        <div class="rbt-card-top">
                                                            <div class="rbt-review">
                                                                <div class="rating">
                                                                    <i class="fas fa-star"></i>
                                                                    <i class="fas fa-star"></i>
                                                                    <i class="fas fa-star"></i>
                                                                    <i class="fas fa-star"></i>
                                                                </div>
                                                                <!-- Rating count can be dynamically generated if available -->
                                                                <span class="rating-count"></span>
                                                            </div>
                                                            <!-- Bookmark button can be enabled if required -->
                                                            <div class="rbt-bookmark-btn">
                                                                <!-- <a class="rbt-round-btn" title="Bookmark" href="#"><i class="feather-bookmark"></i></a> -->
                                                            </div>
                                                        </div>
                                        
                                                        <h4 class="rbt-card-title"><a href="<%= course.courseDetailLink %>"><%= course.name %></a></h4>
                                                        <!-- Duration can be dynamic or fixed based on the course data -->
                                                        <ul class="rbt-meta">
                                                            <li><i class="feather-users"></i>Batch Starts-</li>
                                                            <!-- Batch start date can be dynamically set if available -->
                                                            <li class="hola"><i class="feather-book"></i> <span class="start-date">Loading date...</span></li>
                                                            <li><i class="feather-clock"></i><%= course.duration %></li>
                                                        </ul>
                                        
                                                        <!-- Course description can be dynamically generated if available -->
                                                        <p class="rbt-card-text"><%= course.description %></p>
                                                        <div class="rbt-author-meta mb--10">
                                                            <div class="rbt-avater">
                                                                <a href="#">
                                                                    <% course.logos.forEach(function(logo) { %>
                                                                        <img src="<%= logo.src %>" alt="<%= logo.alt %>" class="course-logo">
                                                                    <% }); %>
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <div class="rbt-card-bottom">
                                                            <div class="rbt-price">
                                                                <span class="current-price">Rs <%= course.formattedCurrentPrice %></span>
                                                                <span class="off-price"> Rs <%= course.formattedDiscountedPrice %></span>
                                                            </div>
                                                            <a class="rbt-btn-link" href="<%= course.courseDetailLink %>">Learn More<i class="feather-arrow-right"></i></a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        <% }); %>
                                        
                                        <!-- End Single Card  -->

                                       
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="rbt-separator-mid">
                        <div class="container">
                            <hr class="rbt-separator m-0">
                        </div>
                    </div>

                    <div class="container-fluid">
                        <div class="row g-3">
                            <div class="col-lg-2 col-md-4 col-sm-6 col-6">
                                <div class="instagram-grid">
                                    <a>
                                        <img src="assets/images/instagram/instagram-01.jpg" alt="instagram">
                                        <span class="user-info">
                                            <span class="icon"><i class="icon-instagram"></i></span>

                                        </span>
                                    </a>
                                </div>
                            </div>
                            <div class="col-lg-2 col-md-4 col-sm-6 col-6">
                                <div class="instagram-grid">
                                    <a>
                                        <img src="assets/images/instagram/instagram-02.jpg" alt="instagram">
                                        <span class="user-info">
                                            <span class="icon"><i class="icon-instagram"></i></span>

                                        </span>
                                    </a>
                                </div>
                            </div>
                            <div class="col-lg-2 col-md-4 col-sm-6 col-6">
                                <div class="instagram-grid">
                                    <a>
                                        <img src="assets/images/instagram/instagram-03.jpg" alt="instagram">
                                        <span class="user-info">
                                            <span class="icon"><i class="icon-instagram"></i></span>

                                        </span>
                                    </a>
                                </div>
                            </div>
                            <div class="col-lg-2 col-md-4 col-sm-6 col-6">
                                <div class="instagram-grid">
                                    <a>
                                        <img src="assets/images/instagram/instagram-04.jpg" alt="instagram">
                                        <span class="user-info">
                                            <span class="icon"><i class="icon-instagram"></i></span>
                                        </span>
                                    </a>
                                </div>
                            </div>
                            <div class="col-lg-2 col-md-4 col-sm-6 col-6">
                                <div class="instagram-grid">
                                    <a>
                                        <img src="assets/images/instagram/instagram-05.jpg" alt="instagram">
                                        <span class="user-info">
                                            <span class="icon"><i class="icon-instagram"></i></span>

                                        </span>
                                    </a>
                                </div>
                            </div>
                            <div class="col-lg-2 col-md-4 col-sm-6 col-6">
                                <div class="instagram-grid">
                                    <a>
                                        <img src="assets/images/instagram/instagram-06.jpg" alt="instagram">
                                        <span class="user-info">
                                            <span class="icon"><i class="icon-instagram"></i></span>

                                        </span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <script>
                        document.addEventListener("DOMContentLoaded", function () {
                            // Get the modal
                            var modal = document.getElementById("courseModal");

                            // Get all links that open the modal
                            var links = document.querySelectorAll("a[href='/course-details']");

                            // Get the <span> element that closes the modal
                            var span = document.getElementsByClassName("close")[0];

                            // Attach event listener to each link
                            links.forEach(function (link) {
                                link.addEventListener("click", function (event) {
                                    event.preventDefault(); // Prevent the default action (navigation)
                                    event.stopPropagation(); // Prevent event from bubbling up
                                    modal.style.display = "block";
                                });
                            });

                            // When the user clicks on <span> (x), close the modal
                            span.onclick = function () {
                                modal.style.display = "none";
                            }

                            // When the user clicks anywhere outside of the modal, close it
                            window.onclick = function (event) {
                                if (event.target == modal) {
                                    modal.style.display = "none";
                                }
                            }
                        });
                        document.addEventListener('DOMContentLoaded', function() {
    const getNextStartDate = () => {
      const today = new Date();
      let day = today.getDate();
      let month = today.getMonth(); // Note: January is 0
      let year = today.getFullYear();

      if (day > 15) {
        // If today's date is past the 15th, set to the 30th of this month;
        // if the month has less than 30 days, set to the 15th of next month.
        const lastDay = new Date(year, month + 1, 0).getDate();
        if (lastDay < 30) {
          // Adjust for next month
          month += 1;
          day = 15;
          if (month > 11) { // Adjust for year change
            month = 0; // January
            year += 1;
          }
        } else {
          day = 30;
        }
      } else {
        // If today's date is the 15th or earlier, set to the 15th of this month.
        day = 15;
      }

      // Formatting the date string
      const date = new Date(year, month, day);
      return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
    };

    // Update all start-date placeholders
    document.querySelectorAll('.start-date').forEach(element => {
      element.textContent = getNextStartDate();
    });
  });
  
                    </script>
                    <%- include('footer');-%>