<% if (isUserLoggedIn) { %>
    <!-- Include auth_header -->
    <%- include('auth_header') %>
        <% } else { %>
            <!-- Include regular header -->
            <%- include('header') %>
                <% } %>
                    <style>
                        .criteria .tick-mark {
                            display: none;
                            color: green;
                        }

                        .criteria.fulfilled .tick-mark {
                            display: inline;
                        }

                        .criteria.fulfilled {
                            color: green;
                        }

                        .loader {
                            border: 16px solid #f3f3f3;
                            /* Light grey */
                            border-top: 16px solid #3498db;
                            /* Blue */
                            border-radius: 50%;
                            width: 120px;
                            height: 120px;
                            animation: spin 2s linear infinite;
                        }

                        @keyframes spin {
                            0% {
                                transform: rotate(0deg);
                            }

                            100% {
                                transform: rotate(360deg);
                            }
                        }
                    </style>

                    <div class="rbt-become-area bg-color-white rbt-section-gap">
                        <div class="container">

                            <div class="row pt--60 g-5">
                                <div class="col-lg-4">
                                    <div class="thumbnail">
                                        <img class="radius-10 w-100" src="assets/images/tab/becometeacher.jpg" alt="Become Teacher and Instructor
                    ">
                                    </div>
                                </div>

                                <div class="col-lg-8">
                                    <div class="rbt-contact-form contact-form-style-1 max-width-auto">

                                        <form action="/user-submit" class="row row--15" method="post" id="addUserForm"
                                            enctype="multipart/form-data">
                                            <div id="billing-form">
                                                <h1 class="checkout-title" style="color: rgb(0, 75, 161);">Register
                                                    Yourelf</h1>

                                                <div class="row">

                                                    <div class="col-md-6 col-12 mb--20">
                                                        <label>Full Name</label>
                                                        <input type="fullname" placeholder="First Name" name="fullname">
                                                    </div>

                                                    <div class="col-md-6 col-12 mb--20">
                                                        <label>Mobile</label>
                                                        <input type="number" placeholder="Mob.No." name="number">
                                                    </div>
                                                    <div class="col-md-6 col-12 mb--20">
                                                        <label>Email</label>
                                                        <input type="email" placeholder="Email" name="username">
                                                    </div>
                                                    <div class="col-md-6 col-12 mb--20">
                                                        <label aria-placeholder="India">Country</label>
                                                        <input type="text" id="country" placeholder="India"
                                                            value="India" readonly style="background-color: #f0f0f0;">
                                                    </div>
                                                    <div class="col-md-6 col-12 mb--20">
                                                        <label for="password">Password</label>
                                                        <input type="password" id="password" name="password" required>
                                                        <div id="password-criteria">
                                                            <p id="length" class="criteria"><span
                                                                    class="tick-mark">&#10003;</span> At least 8
                                                                characters</p>
                                                            <p id="digit" class="criteria"><span
                                                                    class="tick-mark">&#10003;</span> Contains a digit
                                                            </p>
                                                            <p id="lowercase" class="criteria"><span
                                                                    class="tick-mark">&#10003;</span> Contains a
                                                                lowercase letter</p>
                                                            <p id="uppercase" class="criteria"><span
                                                                    class="tick-mark">&#10003;</span> Contains an
                                                                uppercase letter</p>
                                                            <p id="non-alphanumeric" class="criteria"><span
                                                                    class="tick-mark">&#10003;</span> Contains a
                                                                non-alphanumeric character</p>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-6 col-12 mb--20">
                                                        <label>Course Intersted</label>
                                                        <div class="rbt-modern-select bg-transparent height-45">
                                                            <select class="w-100">
                                                                <option value="">Select a Course</option>
                                                                <option value="PCDM">Professional Certificate in
                                                                    Diabetes Management</option>
                                                                <option value="ACDM">Advance Certificate in Diabetes
                                                                    Management</option>
                                                                <option value="FDM">Fellowship in Diabetes Management
                                                                </option>
                                                                <option value="PCC">Professional Certificate in Critical
                                                                    Care</option>
                                                                <option value="ACC">Advance Certificate in Critical Care
                                                                </option>
                                                                <option value="FCC">Fellowship in Critical Care</option>
                                                                <option value="PCGP">Professional Certificate in General
                                                                    Practice</option>
                                                                <option value="ACGP">Advance Certificate in General
                                                                    Practice</option>
                                                                <option value="FGP">Fellowship in General Practice
                                                                </option>
                                                                <option value="PCIM">Professional Certificate in
                                                                    Internal Medicine</option>
                                                                <option value="ACIM">Advance Certificate in Internal
                                                                    Medicine</option>
                                                                <option value="FIM">Fellowship in Internal Medicine
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="file-upload-section col-md-6 col-12 mb--20">
                                                        <input type="file" name="officialIDCard" accept="image/*"
                                                            required>
                                                        <br>
                                                        <label for="officialIDCard">Official ID Card</label>
                                                        <br>
                                                        <br>
                                                        <input type="file" name="mciCertificate" accept="image/*"
                                                            required>
                                                        <br>
                                                        <label for="mciCertificate">MCI Certificate</label>
                                                        <br>
                                                        <br>
                                                        <input type="file" name="degree" accept="image/*" required>
                                                        <br>
                                                        <label for="degree">Degree</label><br>
                                                        <br>
                                                        <input type="file" name="passportPhoto" accept="image/*"
                                                            required>
                                                        <br>
                                                        <label for="passportPhoto">Passport Photo</label><br>
                                                    </div>

                                                </div>
                                                <div class="col-lg-12">
                                                    <div class="form-submit-group">
                                                        <button type="submit"
                                                            class="rbt-btn btn-md btn-gradient hover-icon-reverse w-100">
                                                            <span class="icon-reverse-wrapper">
                                                                <span class="btn-text">Submit</span>
                                                                <span class="btn-icon"><i
                                                                        class="feather-arrow-right"></i></span>
                                                                <span class="btn-icon"><i
                                                                        class="feather-arrow-right"></i></span>
                                                            </span>
                                                        </button>
                                                    </div>
                                                </div>

                                            </div>
                                            <div id="loadingSpinner" style="display: none;">
                                                <!-- This is a simple CSS loader, you can customize it or replace it with an image/gif -->
                                                <div class="loader"></div>
                                            </div>

                                        </form>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <script>
                        document.getElementById('password').addEventListener('input', function () {
                            const password = this.value;
                            // Adjusted regex to correctly identify non-alphanumeric characters
                            const nonAlphanumericRegex = /[^a-zA-Z0-9]/;

                            document.getElementById('length').classList.toggle('fulfilled', password.length >= 8);
                            document.getElementById('digit').classList.toggle('fulfilled', /\d/.test(password));
                            document.getElementById('lowercase').classList.toggle('fulfilled', /[a-z]/.test(password));
                            document.getElementById('uppercase').classList.toggle('fulfilled', /[A-Z]/.test(password));
                            // Use the adjusted regex for non-alphanumeric character detection
                            document.getElementById('non-alphanumeric').classList.toggle('fulfilled', nonAlphanumericRegex.test(password));
                        });
                        document.getElementById('addUserForm').addEventListener('submit', function (e) {
                            e.preventDefault(); // Prevent the default form submission

                            // Show the loader
                            document.getElementById('loadingSpinner').style.display = 'block';

                            const formData = new FormData(this);

                            fetch('/user-submit', {
                                method: 'POST',
                                body: formData,
                            })
                                .then(response => response.json())
                                .then(data => {
                                    // Hide the loader
                                    document.getElementById('loadingSpinner').style.display = 'none';

                                    if (data.success && data.redirectUrl) {
                                        window.location.href = data.redirectUrl;
                                    } else if (data.message) {
                                        // Display your popup message here
                                        alert(data.message);
                                    }
                                })
                                .catch((error) => {
                                    // Hide the loader
                                    document.getElementById('loadingSpinner').style.display = 'none';

                                    console.error('Error:', error);
                                    alert('An error occurred, please try again.');
                                });
                        });


                    </script>
                    <%- include('footer'); -%>