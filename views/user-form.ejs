<% if (isUserLoggedIn) { %>
    <!-- Include auth_header -->
    <%- include('auth_header') %>
        <% } else { %>
            <!-- Include regular header -->
            <%- include('header') %>
                <% } %>
                    <style>
                        .criteria .tick-mark {
                            display: none;
                            color: green;
                        }

                        .criteria.fulfilled .tick-mark {
                            display: inline;
                        }

                        .criteria.fulfilled {
                            color: green;
                        }

                        .loader {
                            border: 16px solid #f3f3f3;
                            /* Light grey */
                            border-top: 16px solid #3498db;
                            /* Blue */
                            border-radius: 50%;
                            width: 120px;
                            height: 120px;
                            animation: spin 2s linear infinite;
                        }

                        @keyframes spin {
                            0% {
                                transform: rotate(0deg);
                            }

                            100% {
                                transform: rotate(360deg);
                            }
                        }
                        .file-upload-wrapper {
        position: relative;
        margin-bottom: 20px;
    }
    .file-upload-input {
        width: 0.1px;
        height: 0.1px;
        opacity: 0;
        overflow: hidden;
        position: absolute;
        z-index: -1;
    }
    .file-upload-label {
        display: block;
        background-color: #3498db;
        color: #fff;
        padding: 10px 20px;
        text-align: center;
        border-radius: 5px;
        cursor: pointer;
    }
    .file-upload-label:hover {
        background-color: #2980b9;
    }
    .file-name {
        margin-top: 5px;
        font-family: monospace;
        color: #333;
    }
                    </style>

                    <div class="rbt-become-area bg-color-white rbt-section-gap">
                        <div class="container">

                            <div class="row pt--60 g-5">
                                <div class="col-lg-4">
                                    <div class="thumbnail">
                                        <img class="radius-10 w-100" src="assets/images/tab/becometeacher.jpg" alt="Become Teacher and Instructor
                    ">
                                    </div>
                                </div>

                                <div class="col-lg-8">
                                    <div class="rbt-contact-form contact-form-style-1 max-width-auto">

                                        <form action="/user-submit" class="row row--15" method="post" id="addUserForm"
                                            enctype="multipart/form-data">
                                            <div id="billing-form">
                                                <h1 class="checkout-title" style="color: rgb(0, 75, 161);">Register
                                                    Yourself</h1>

                                                <div class="row">

                                                    <div class="col-md-6 col-12 mb--20">
                                                        <label>Full Name</label>
                                                        <input type="fullname" name="fullname">
                                                    </div>

                                                    <div class="col-md-6 col-12 mb--20">
                                                        <label>Mobile</label>
                                                        <input type="number" name="number">
                                                    </div>
                                                    <div class="col-md-6 col-12 mb--20">
                                                        <label>Email</label>
                                                        <input type="email" name="username">
                                                    </div>
                                                    <div class="col-md-6 col-12 mb--20">
                                                        <label aria-placeholder="India">Country</label>
                                                        <input type="text" id="country" 
                                                            value="India" readonly style="background-color: #f0f0f0;">
                                                    </div>

                                                    <div class="col-md-6 col-12 mb--20">
                                                        <label>Course Intersted</label>
                                                        <div class="rbt-modern-select bg-transparent height-45">
                                                            <select class="w-100" name="course">
                                                                <option value="">Select a Course</option>
                                                                <option value="PCDM">Professional Certificate in
                                                                    Diabetes Management</option>
                                                                <option value="ACDM">Advance Certificate in Diabetes
                                                                    Management</option>
                                                                <option value="FDM">Fellowship in Diabetes Management
                                                                </option>
                                                                <option value="PCC">Professional Certificate in Critical
                                                                    Care</option>
                                                                <option value="ACC">Advance Certificate in Critical Care
                                                                </option>
                                                                <option value="FCC">Fellowship in Critical Care</option>
                                                                <option value="PCGP">Professional Certificate in General
                                                                    Practice</option>
                                                                <option value="ACGP">Advance Certificate in General
                                                                    Practice</option>
                                                                <option value="FGP">Fellowship in General Practice
                                                                </option>
                                                                <option value="PCIM">Professional Certificate in
                                                                    Internal Medicine</option>
                                                                <option value="ACIM">Advance Certificate in Internal
                                                                    Medicine</option>
                                                                <option value="FIM">Fellowship in Internal Medicine
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 mb--20">
                                                        <div class="col-md-6 col-12">
                                                            <div class="file-upload-wrapper">
                                                                <input type="file" name="officialIDCard" id="officialIDCard" class="file-upload-input" accept="image/*" required>
                                                                <label for="officialIDCard" class="file-upload-label">Upload Official ID Card</label>
                                                                <span id="officialIDCard-name" class="file-name">No file chosen</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 col-12">
                                                            <div class="file-upload-wrapper">
                                                                <input type="file" name="mciCertificate" id="mciCertificate" class="file-upload-input" accept="image/*" required>
                                                                <label for="mciCertificate" class="file-upload-label">Upload MCI Certificate</label>
                                                                <span id="mciCertificate-name" class="file-name">No file chosen</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 col-12">
                                                            <div class="file-upload-wrapper">
                                                                <input type="file" name="degree" id="degree" class="file-upload-input" accept="image/*" required>
                                                                <label for="degree" class="file-upload-label">Upload Degree</label>
                                                                <span id="degree-name" class="file-name">No file chosen</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 col-12">
                                                            <div class="file-upload-wrapper">
                                                                <input type="file" name="passportPhoto" id="passportPhoto" class="file-upload-input" accept="image/*" required>
                                                                <label for="passportPhoto" class="file-upload-label">Upload Passport Photo</label>
                                                                <span id="passportPhoto-name" class="file-name">No file chosen</span>
                                                            </div>
                                                        </div>
                                                        
                                                    </div>

                                                </div>
                                                <div class="col-lg-12">
                                                    <div class="form-submit-group">
                                                        <button type="submit"
                                                            class="rbt-btn btn-md btn-gradient hover-icon-reverse w-100">
                                                            <span class="icon-reverse-wrapper">
                                                                <span class="btn-text">Submit</span>
                                                                <span class="btn-icon"><i
                                                                        class="feather-arrow-right"></i></span>
                                                                <span class="btn-icon"><i
                                                                        class="feather-arrow-right"></i></span>
                                                            </span>
                                                        </button>
                                                    </div>
                                                </div>

                                            </div>
                                            <div id="loadingSpinner" style="display: none;">
                                                <!-- This is a simple CSS loader, you can customize it or replace it with an image/gif -->
                                                <div class="loader"></div>
                                            </div>

                                        </form>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <script>
                         document.querySelectorAll('.file-upload-input').forEach(input => {
        input.addEventListener('change', function() {
            var fileName = this.files && this.files.length > 0 ? this.files[0].name : "No file chosen";
            var fileNameDisplay = this.nextElementSibling.nextElementSibling; // Adjust based on your HTML structure
            fileNameDisplay.textContent = fileName;
        });
    });
                        document.getElementById('addUserForm').addEventListener('submit', function (e) {
                            e.preventDefault(); // Prevent the default form submission

                            // Show the loader
                            document.getElementById('loadingSpinner').style.display = 'block';

                            const formData = new FormData(this);

                            fetch('/user-submit', {
                                method: 'POST',
                                body: formData,
                            })
                                .then(response => response.json())
                                .then(data => {
                                    // Hide the loader
                                    document.getElementById('loadingSpinner').style.display = 'none';

                                    if (data.success && data.redirectUrl) {
                                        window.location.href = data.redirectUrl;
                                    } else if (data.message) {
                                        // Display your popup message here
                                        alert(data.message);
                                    }
                                })
                                .catch((error) => {
                                    // Hide the loader
                                    document.getElementById('loadingSpinner').style.display = 'none';

                                    console.error('Error:', error);
                                    alert('An error occurred, please try again.');
                                });
                        });


                    </script>
                    <%- include('footer'); -%>